---
import Layout from "../layouts/Page.astro";
import { Image } from "astro:assets";
import infrastructureImage from "../assets/images/HomeSection.png";
import GoogleTagManager from "../components/GoogleTagManager.astro";
import GoogleTagManagerNoScript from "../components/GoogleTagManagerNoScript.astro";
import alumno from "../assets/images/alumno.png";
---

<head>
  <GoogleTagManager />
</head>
<Layout
  title="Nuestra Infraestructura"
  heroImage="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  description="Descubre nuestras instalaciones diseñadas para el aprendizaje y el crecimiento."
>
  <section class="md:py-16 md:px-16 px-6 bg-white mx-auto">
    <div class="container mx-auto grid md:grid-cols-2 items-center">
      <div>
        <h3 class="text-4xl md:text-6xl font-bold mb-8">
          Instalaciones de Primera Clase
        </h3>

        <p class="max-w-xl mb-8">
          Nuestras instalaciones están equipadas con tecnología de punta y
          espacios diseñados para fomentar el aprendizaje y la creatividad. Cada
          área está pensada para ofrecer un entorno seguro y estimulante para
          los niños.
        </p>
        <a href="/contact" class="btn btn-neutral btn-xl">Visítanos</a>
      </div>
      <div class="relative h-full pb-12">
        <Image
          src={infrastructureImage}
          alt="Instalaciones modernas y seguras"
          class="w-full h-full object-cover rounded-2xl"
        />
      </div>
    </div>
  </section>
  <div class="body ">
    <div class="wrapper">
      <section class="intro bg-image">
        <div class="logo">
          <h1>Nuestros <br /> campos</h1>
        </div>
      </section>

      <section class="alumno character !text-white">
        <div class="block fondo_uno"></div>
        <Image src={alumno} alt="alumno" class="character-image" />
        <span class="huge-text">alumno</span>
        <div class="caption  font-serif text-2xl">
          En nuestra área deportiva, los niños y niñas descubren el placer de moverse mientras desarrollan habilidades motrices, coordinación, equilibrio y trabajo en equipo.
        </div>
        <div class="nickname"><span>lugar:</span>Patio de juegos</div>
        <div class="quote">Cuerpo en movimiento, mente en desarrollo</div>
      </section>

      <section class="alumno_dos character !text-white">
        <div class="block fondo_dos"></div>
        <img src="/src/assets/images/gil.png" alt="" /><span class="huge-text"
          >niños</span
        >
        <div class="caption font-serif text-2xl">
          Nuestras aulas están diseñadas para inspirar y motivar a los estudiantes, con espacios luminosos, mobiliario ergonómico y recursos didácticos innovadores.
        </div>
        <div class="nickname"><span>lugar:</span>Aulas</div>
        <div class="quote">
          Aprendiendo y creciendo juntos
        </div>
      </section>
    </div>
  </div>
  <section class="bg-accent">
    <div
      class="container mx-auto md:py-36 py-16 flex flex-wrap flex-col md:flex-row justify-center md:gap-36 gap-16 text-center"
    >
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="5">
          0
        </div>
        <span class="text-base-content">Aulas modernas</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="3">
          0
        </div>
        <span class="text-base-content">Áreas de juego</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="2">
          0
        </div>
        <span class="text-base-content">Laboratorios de ciencia</span>
      </div>
    </div>
  </section>
  <GoogleTagManagerNoScript />
</Layout>
<style>
  @import url("https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap");

  .body {
    overflow-x: hidden;
    overflow-y: auto;
  }

  *,
  *::before,
  *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .body {
    min-height: 100vh;
    font-size: 16px;
    line-height: 1.3;
    font-family: "Bebas Neue", cursive;
  }

  .wrapper {
    width: 300%;
    height: 100%;
    display: flex;
    flex-wrap: nowrap;
  }

  .logo {
    font-size: 8rem;
    position: fixed;
    z-index: 10;
    /* top: 15%;
      left: 4rem; */
    line-height: 0.9;
  }

  .line {
    background-color: red;
    height: 1rem;
    position: absolute;
    top: 50%;
    width: 100%;
    transform: translateY(-50%);
  }

  section {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }

  .body section.character::before {
    content: "";
    width: 2rem;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
  }

  .block {
    width: 100%;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
    transform: translateX(-100%);
  }

  .alumno::before,
  .alumno .block {
    background-image: url("../assets/images/fondo1.jpg");
    background-size: cover;
  }

  .alumno_dos::before,
  .alumno_dos .block {
    background-image: url("../assets/images/fondo2.jpg");
    background-size: cover;
  }

  .caption {
    position: absolute;
    bottom: 4rem;
    left: 4rem;
    width: 30%;
    font-weight: 400;
    color: #444;
    transform: translate(100%, 100%);
  }

  .character img {
    position: relative;
    z-index: 10;
    height: 90vh;
    width: auto;
    transform: translateY(-100%);
  }

  .huge-text {
    font-size: 25rem;
    width: 100%;
    text-align: center;
    color: #f52b2b;
    position: absolute;
    top: 20%;
    left: 0;
    transform: translateY(100%);
    font-weight: 700;
  }

  .nickname {
    position: absolute;
    top: 4rem;
    right: 4rem;
    font-size: 3rem;
    text-align: right;
    transform: translateY(-200%);
  }

  .nickname span {
    display: block;
    font-size: 70%;
    color: #fff;
  }

  .quote {
    position: absolute;
    bottom: 4rem;
    right: 4rem;
    font-size: 3rem;
    width: 30%;
    text-align: right;
    transform: translateY(200%);
  }

  .quote::before,
  .quote::after {
    content: "";
    color: #fff;
  }
</style>
<script>
  import { gsap } from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);
  console.log("hola", gsap);
  document.addEventListener("DOMContentLoaded", () => {
    const sections = gsap.utils.toArray(".wrapper > section");

    let scrollTween = gsap.to(sections, {
      xPercent: -100 * (sections.length - 1),
      ease: "none",
      scrollTrigger: {
        trigger: ".wrapper",
        pin: true,
        scrub: 0.1,
        snap: {
          snapTo: 1 / (sections.length - 1), // Mejor práctica para snap
          duration: { min: 0.2, max: 0.5 }, // Duración del snap
          ease: "power1.inOut", // Suavizado del snap
        },
        start: "top top",
        end: () => {
          const wrapper = document.querySelector(".wrapper");
          return wrapper
            ? `+=${wrapper.scrollWidth - window.innerWidth}`
            : "+=0"; // Ajuste dinámico del final
        },
      },
    });

    gsap.to(".logo", {
      fontSize: "2.5rem",
      top: "4rem",
      scrollTrigger: {
        trigger: ".logo",
        start: "top top",
        end: "+=1500",
        scrub: 0.5,
      },
    });

    gsap.to(".line", {
      height: "10rem",
      scrollTrigger: {
        trigger: ".line",
        scrub: 0.5,
        start: "center center",
        end: "+=2000",
      },
    });

    document.querySelectorAll(".character").forEach((el) => {
      const caption = el.querySelector(".caption");
      const quote = el.querySelector(".quote");
      const nickname = el.querySelector(".nickname");
      const block = el.querySelector(".block");
      const img = el.querySelector("img");
      const hugeText = el.querySelector(".huge-text");

      if (caption) {
        gsap.to(caption, {
          x: 0,
          y: 0,
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: caption,
            start: "top bottom",
            end: "+=1000",
            scrub: 0.5,
          },
        });
      }

      if (quote) {
        gsap.to(quote, {
          y: 0,
          ease: "none",
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: quote,
            start: "top bottom",
            end: "+=20%",
            scrub: 0.5,
          },
        });
      }

      if (nickname) {
        gsap.to(nickname, {
          y: 0,
          ease: "none",
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: nickname,
            start: "top bottom",
            end: "+=10%",
            scrub: 0.5,
          },
        });
      }

      if (block) {
        gsap.to(block, {
          x: 0,
          ease: "none",
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: block,
            start: "top bottom",
            end: () => `+=${window.innerWidth}`,
            scrub: 0.5,
          },
        });
      }

      if (img) {
        gsap.to(img, {
          y: 0,
          ease: "none",
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: img,
            start: "top bottom",
            end: "+=50%",
            scrub: 0.5,
          },
        });
      }

      if (hugeText) {
        gsap.to(hugeText, {
          y: 0,
          ease: "none",
          scrollTrigger: {
            containerAnimation: scrollTween,
            trigger: hugeText,
            start: "top bottom",
            end: "+=100%",
            scrub: 0.5,
          },
        });
      }
    });
  });
</script>

---
import Layout from "../layouts/Page.astro";
import { Image } from "astro:assets";
import infrastructureImage from "../assets/images/HomeSection.png";
import GoogleTagManager from "../components/GoogleTagManager.astro";
import GoogleTagManagerNoScript from "../components/GoogleTagManagerNoScript.astro";
import alumno from "../assets/images/alumno.png";
import fondo from "../assets/images/infra_01.jpg";
import fondo_dos from "../assets/images/infra_02.jpg";
import fondo_tres from "../assets/images/infra_03.jpg";
import Preloader from "../components/preloader.astro";
---

<head>
  <meta charset="UTF-8" />
  <GoogleTagManager />
</head>
<Preloader />
<Layout
  title="Nuestra Infraestructura"
  heroImage={fondo_tres}
  description="Descubre nuestras instalaciones diseñadas para el aprendizaje y el crecimiento."
>
  <section class="md:py-16 md:px-16 px-6 bg-white mx-auto">
    <div
      class="container mx-auto grid md:grid-cols-2 items-center gap-8 px-6 py-12"
    >
      <div>
        <h3 class="text-4xl md:text-6xl font-bold mb-6">
          Instalaciones de Primera Clase
        </h3>

        <p class="max-w-xl mb-6 mt-6">
          Nuestras instalaciones están equipadas con tecnología de punta y
          espacios diseñados para fomentar el aprendizaje y la creatividad. Cada
          área está pensada para ofrecer un entorno seguro y estimulante para
          los niños.
        </p>
        <a href="/contact" class="btn btn-neutral px-8 py-4 btn-xl mt-6"
          >Visítanos</a
        >
      </div>
      <div class="relative h-full">
        <Image
          src={infrastructureImage}
          alt="Instalaciones modernas y seguras"
          class="w-full h-full object-cover rounded-2xl"
        />
      </div>
    </div>
  </section>
  <div class="body">
    <div class="wrapper">
      <section class="intro bg-image">
        <div class="logo">
          <h1 class="text-[20vw] md:text-[10vw] lg:text-[10vw]">
            Nuestros <br /> campos
          </h1>
        </div>
      </section>

      <section class="aulas character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">aulas</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Alumno en aula"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Alumno en aula"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Nuestras aulas están diseñadas para el aprendizaje activo: rincones de
          lectura, espacios de experimentación y ambientes que inspiran
          curiosidad y descubrimiento.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Ambientes pedagógicos
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Espacios que invitan a explorar
        </div>
      </section>

      <section class="patio character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">patio</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Patio central"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Niños jugando en el patio"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Un patio amplio, seguro y organizado por zonas, que permite juegos
          libres, actividades físicas y momentos de exploración al aire libre.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Patio central del nido
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Moverse también es aprender
        </div>
      </section>

      <section class="talleres character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">talleres</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Taller artístico"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Niños en taller creativo"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Contamos con ambientes preparados para talleres artísticos, musicales
          y científicos que complementan la jornada escolar con experiencias
          enriquecedoras.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Salas de expresión y creatividad
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Explorar más allá del aula
        </div>
      </section>

      <section class="teatro character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">teatro</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Escenario de teatro"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Niños actuando en teatro"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Un espacio donde los niños y niñas presentan lo aprendido a través de
          obras y representaciones que fortalecen la expresión, el lenguaje y la
          confianza.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Mini escenario o sala de usos múltiples
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Aprender también se actúa
        </div>
      </section>

      <section class="entrevista character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">entrevista</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Sala de orientación"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Reunión en sala de orientación"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Un ambiente acogedor y reservado, donde la directora o la psicóloga
          reciben a las familias para atender sus inquietudes y acompañarlas en
          el proceso educativo.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Sala de orientación
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Escuchar es también educar
        </div>
      </section>

      <section class="familia character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">familia</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={alumno}
              alt="Sala de familia"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Reunión familiar"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Un espacio especial para la formación de nanas, abuelitos y padres,
          donde se fortalecen los vínculos con el hogar y se comparten
          herramientas de crianza.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Sala de familia
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Educar en red, crecer juntos
        </div>
      </section>

      <section class="material character !text-white">
        <div class="block fondo_uno"></div>

        <div class="container-imagenes w-full h-full">
          <span
            class="huge-text select-none relative z-20 text-[10vw] md:text-[8vw] lg:text-[6vw]"
            aria-hidden="true">material</span
          >
          <div
            class="buttons absolute z-50 bottom-4 left-[50%] -translate-x-1/2 flex gap-2"
          >
            <button class="prev-btn cursor-pointer">Anterior</button>
            <button class="next-btn text-black cursor-pointer">Siguiente</button
            >
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo}
              alt="Material didáctico"
              class="h-screen w-screen object-cover"
            />
          </div>
          <div class="imagen w-full h-full">
            <Image
              src={fondo_dos}
              alt="Niños usando material didáctico"
              class="h-screen w-screen object-cover"
            />
          </div>
        </div>
        <div class="caption font-serif text-2xl md:text-3xl lg:text-4xl">
          Contamos con bibliotecas, estanterías y rincones llenos de material
          didáctico diseñado para fomentar la curiosidad, la autonomía y el
          juego significativo.
        </div>
        <div class="nickname text-lg md:text-xl lg:text-2xl">
          <span>lugar:</span>Rincones pedagógicos
        </div>
        <div class="quote text-lg md:text-xl lg:text-2xl">
          Jugar es aprender con las manos
        </div>
      </section>
    </div>
  </div>
  <section class="contador-aulas bg-accent">
    <div
      class="container mx-auto md:py-36 py-16 flex flex-wrap flex-col md:flex-row justify-center md:gap-36 gap-16 text-center"
    >
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="5">
          0
        </div>
        <span class="text-base-content">Aulas modernas</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="3">
          0
        </div>
        <span class="text-base-content">Áreas de juego</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="text-8xl font-bold text-black counter" data-target="2">
          0
        </div>
        <span class="text-base-content">Laboratorios de ciencia</span>
      </div>
    </div>
  </section>
  <GoogleTagManagerNoScript />
</Layout>
<style>
  @import url("https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap");

  .body {
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100vh;
    font-size: 16px;
    line-height: 1.3;
    font-family: "Bebas Neue", cursive;
  }

  .wrapper {
    width: calc(100% * ${sections.length});
    height: 100vh;
    display: flex;
    flex-wrap: nowrap;
  }

  .logo {
    font-size: 8rem;
    position: fixed;
    z-index: 10;
    /* top: 15%;
      left: 4rem; */
    line-height: 0.9;
  }

  .line {
    background-color: rgba(49, 110, 166, 255);
    height: 1rem;
    position: absolute;
    top: 50%;
    width: 100%;
    transform: translateY(-50%);
  }

  section {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }

  .body section.character::before {
    content: "";
    width: 2rem;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
  }

  .block {
    width: 100%;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
    transform: translateX(-100%);
  }
  .intro {
    background-image: url("../assets/images/FONDO_CLARO.png");
    background-size: cover;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .wrapper > section {
    flex: 0 0 100vw; /* Ocupa todo el ancho */
  }

  .container-imagenes img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
  }

  .container-imagenes {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0;
  }
  .container-imagenes .imagen {
    opacity: 0;
    transition: opacity 0.6s;
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: block; /* Siempre block para permitir el fade */
    z-index: -100; /* Ocultar inicialmente */
  }
  .container-imagenes .imagen.active {
    opacity: 1;
    z-index: -10;
  }
  .caption {
    font-size: calc(1.2vw + 0.5vh);
    position: absolute;
    bottom: 10%;
    left: 5%;
    width: 30%;
    font-weight: 400;
    color: rgb(7, 60, 109);
    transform: translate(100%, 100%);
    font-family: "Neulis Neue";
    background-color: rgba(207, 207, 207, 0.404);
    border-radius: 1rem;
    padding: 2rem;
  }
  @media (max-width: 768px) {
    .caption {
      left: -5%;
      font-size: calc(1vw + 1vh);
    }
    .huge-text {
      font-size: 20vw; /* Ajustar tamaño de fuente para pantallas más pequeñas */
      top: 40%;
      right: 0%;
      transform: translateX(-4%);
    }
    .nickname {
      top: 2rem;
      right: 5%;
      font-size: 2rem;
      transform: translateY(-200%);
    }
    .quote {
      bottom: 2%;
      right: 20%;
      font-size: 2rem;
      width: 80%;
      transform: translateY(200%);
    }
  }
  @media (max-width: 480px) {
    .caption {
      left: -15%;
      top: 20%;
      width: 800px;
      font-size: calc(1vw + 2vh);
    }
    .huge-text {
      font-size: 25vw; /* Ajustar tamaño de fuente para pantallas más pequeñas */
      top: 60%;
      right: 20%;
      transform: translateX(-4%);
    }
    .nickname {
      top: 10%;
      right: 20%;
      font-size: 1.5rem;
      transform: translateY(-200%);
    }
    .quote {
      bottom: 1%;
      right: 10% !important;
      width: 80vw;

      font-size: 1.5rem;
      text-align: left;
      transform: translateY(200%);
    }
  }
  .huge-text {
    font-size: 15vw; /* Adjust font size relative to viewport width */
    width: 100%;
    color: rgb(243, 114, 88);
    position: absolute;
    top: 40%;
    transform: translateY(-50%);
    right: 0%;
    transform: translateX(-4%);
    font-weight: 700;
    z-index: 0;
    text-align: right; /* Ensures text alignment to the right */
  }
  .buttons {
    position: absolute;
    z-index: 100;
  }
  .nickname {
    position: absolute;
    top: 4rem;
    right: 5%;
    font-size: 3rem;
    text-align: right;
    transform: translateY(-200%);
  }

  .nickname span {
    display: block;
    font-size: 70%;
    color: rgb(252, 144, 122);
  }

  .quote {
    position: absolute;
    bottom: 4%;
    right: 5%;
    font-size: 3rem;
    width: 30%;
    text-align: right;
    transform: translateY(200%);
  }

  .quote::before,
  .quote::after {
    content: "";
    color: rgb(252, 144, 122);
  }
  .contador-aulas {
    background-image: url("../assets/images/FONDO_CLARO.png");
    background-size: cover;
  }
</style>
<script>
  import { gsap } from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  import Draggable from "gsap/Draggable";

  gsap.registerPlugin(ScrollTrigger, Draggable);


  const sections = document.querySelectorAll(".wrapper > section");
  const wrapper = document.querySelector(".wrapper");
  

  let scrollTween = gsap.timeline({
    scrollTrigger: {
      trigger: ".wrapper",
      pin: true,
      scrub: 0.5,
      start: "top top",
      end: () => {
        const wrapper = document.querySelector(".wrapper");
        return wrapper ? `+=${wrapper.scrollWidth - window.innerWidth}` : "+=0";
      },
    },
  });

  sections.forEach((_, i) => {
    if (i !== 0) {
      scrollTween.to(sections, {
        xPercent: -100 * i,
        ease: "power1.inOut",
        duration: 5,
      });
    }

    // Pausa después de cada sección
    scrollTween.to({}, { duration: 5 });
  });

  gsap.to(".logo", {
    fontSize: "2.5rem",
    top: "4rem",
    scrollTrigger: {
      trigger: ".logo",
      start: "top top",
      end: "+=1500",
      scrub: 0.5,
    },
  });

  gsap.to(".line", {
    height: "10rem",
    scrollTrigger: {
      trigger: ".line",
      scrub: 0.5,
      start: "center center",
      end: "+=2000",
    },
  });

  document.querySelectorAll(".character").forEach((el) => {
    const caption = el.querySelector(".caption");
    const quote = el.querySelector(".quote");
    const nickname = el.querySelector(".nickname");
    const block = el.querySelector(".block");
    const img = el.querySelector("img");
    const hugeText = el.querySelector(".huge-text");

    if (caption) {
      gsap.to(caption, {
        x: 0,
        y: 0,
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: caption,
          start: "top bottom",
          end: "+=1000",
          scrub: 0.5,
        },
      });
    }

    if (quote) {
      gsap.to(quote, {
        y: 0,
        ease: "none",
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: quote,
          start: "top bottom",
          end: "+=20%",
          scrub: 0.5,
        },
      });
    }

    if (nickname) {
      gsap.to(nickname, {
        y: 0,
        ease: "none",
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: nickname,
          start: "top bottom",
          end: "+=10%",
          scrub: 0.5,
        },
      });
    }

    if (block) {
      gsap.to(block, {
        x: 0,
        ease: "none",
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: block,
          start: "top bottom",
          end: () => `+=${window.innerWidth}`,
          scrub: 0.5,
        },
      });
    }

    if (img) {
      gsap.to(img, {
        y: 0,
        ease: "none",
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: img,
          start: "top bottom",
          end: "+=50%",
          scrub: 0.5,
        },
      });
    }

    if (hugeText) {
      gsap.to(hugeText, {
        y: 0,
        ease: "none",
        scrollTrigger: {
          containerAnimation: scrollTween,
          trigger: hugeText,
          start: "top bottom",
          end: "+=100%",
          scrub: 0.5,
        },
      });
    }
  });

  document.querySelectorAll(".container-imagenes").forEach((container) => {
    const images = container.querySelectorAll(".imagen");
    const prevBtn = container.querySelector(".prev-btn");
    const nextBtn = container.querySelector(".next-btn");
    let current = 0;

    function showImage(index: number) {
      images.forEach((img, i) => {
        img.classList.toggle("active", i === index);
      });
    }

    if (prevBtn) {
      prevBtn.addEventListener("click", () => {
        current = (current - 1 + images.length) % images.length;
        showImage(current);
      });
    }

    if (nextBtn) {
      nextBtn.addEventListener("click", () => {
        current = (current + 1) % images.length;
        showImage(current);
      });
    }

    showImage(current);
  });
  document.querySelectorAll(".counter").forEach((counter) => {
    const target =
      parseInt(counter.getAttribute("data-target") ?? "0", 10) || 0;
    let obj = { val: 0 };

    gsap.to(obj, {
      val: target,
      duration: 0.5,
      ease: "power1.out",
      scrollTrigger: {
        trigger: counter,
        start: "top 80%",
        once: true,
      },
      onUpdate: () => {
        counter.textContent = Math.floor(obj.val).toString();
      },
      onComplete: () => {
        counter.textContent = target.toString();
      },
    });
  });
</script>

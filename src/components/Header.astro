---
import logoPrincipal from "../assets/images/logoPrincipal.png";
import HeaderLink from "./HeaderLink.astro";
---

<header
	id="main-header"
	class="fixed w-full py-6 backdrop-blur-sm bg-white/30 px-6 top-0 left-0 right-0 z-50 pointer-events-auto transition-all duration-300"
>
	<div class="container mx-auto flex items-center justify-between">
		<div class="flex items-center">
			<a href="/">
				<img src={logoPrincipal.src} alt="Logo" class="h-10" />
			</a>
		</div>

		<!-- Navegación de escritorio -->
		<nav class="hidden md:block">
			<ul class="flex space-x-8 font-semibold">
				<li>
					<HeaderLink
						href="/"
						class="text-gray-800 hover:text-orange-500 transition-all duration-300 hover:opacity-80"
						>Inicio</HeaderLink
					>
				</li>
				<li>
					<HeaderLink
						href="/about"
						class="text-gray-800 hover:text-orange-500 transition-all duration-300 hover:opacity-80"
						>Nosotros</HeaderLink
					>
				</li>
				<li>
					<HeaderLink
						href="/services"
						class="text-gray-800 hover:text-orange-500 transition-all duration-300 hover:opacity-80"
						>Programas & Servicios</HeaderLink
					>
				</li>
				<li>
					<HeaderLink
						href="/infrastructure"
						class="text-gray-800 hover:text-orange-500 transition-all duration-300 hover:opacity-80"
						>Infraestructura</HeaderLink
					>
				</li>
				<li>
					<HeaderLink
						href="/blog"
						class="text-gray-800 hover:text-orange-500 transition-all duration-300 hover:opacity-80"
						>Blog</HeaderLink
					>
				</li>
			</ul>
		</nav>

		<div class="flex items-center">
			<button
				id="mobile-menu-button"
				class="md:hidden flex items-center justify-center w-8 h-8 relative"
			>
				<svg
					id="menu-icon"
					viewBox="0 0 24 24"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
					><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
						id="SVGRepo_tracerCarrier"
						stroke-linecap="round"
						stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
						<path
							d="M4 6H20M4 12H20M4 18H20"
							stroke="#1f2937"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"></path>
					</g></svg
				>

				<img
					id="close-icon"
					src="https://img.icons8.com/?size=160&id=XBRxNqBV78jJ&format=png"
					alt="closemenu"
					class="w-6 h-6 absolute opacity-0 transition-opacity duration-300"
				/>
			</button>
			<a href="/contact" class="btn btn-secondary btn-lg hidden md:flex"
				>Contáctanos</a
			>
		</div>
	</div>

	<!-- Navegación móvil -->
	<nav
		id="mobile-menu"
		class="md:hidden fixed top-0 right-0 w-full h-0 bg-white overflow-hidden transition-all duration-300 ease-in-out shadow-lg"
	>
		<div class="flex items-center justify-between p-6">
			<img src={logoPrincipal.src} alt="Logo" class="h-10" />
			<button
				id="mobile-menu-close"
				class="text-gray-800 flex items-center justify-center w-8 h-8"
			>
				<img
					src="https://img.icons8.com/?size=160&id=XBRxNqBV78jJ&format=png"
					alt="closemenu"
					class="w-6 h-6"
				/>
			</button>
		</div>
		<ul class="flex flex-col space-y-6 p-6 font-semibold">
			<li>
				<HeaderLink
					href="/"
					class="text-gray-800 hover:text-orange-500 transition-all duration-300 block py-2 text-xl"
					>Inicio</HeaderLink
				>
			</li>
			<li>
				<HeaderLink
					href="/about"
					class="text-gray-800 hover:text-orange-500 transition-all duration-300 block py-2 text-xl"
					>Nosotros</HeaderLink
				>
			</li>
			<li>
				<HeaderLink
					href="/services"
					class="text-gray-800 hover:text-orange-500 transition-all duration-300 block py-2 text-xl"
					>Programas & Servicios</HeaderLink
				>
			</li>
			<li>
				<HeaderLink
					href="/contact"
					class="text-gray-800 hover:text-orange-500 transition-all duration-300 block py-2 text-xl"
					>Contacto</HeaderLink
				>
			</li>
			<li>
				<HeaderLink
					href="/blog"
					class="text-gray-800 hover:text-orange-500 transition-all duration-300 block py-2 text-xl"
					>Blog</HeaderLink
				>
			</li>
			<li class="pt-4">
				<a href="/contact" class="btn btn-secondary btn-lg">Contáctanos</a>
			</li>
		</ul>
	</nav>
</header>

<script is:inline>
	let lastScrollY = window.scrollY;

	window.addEventListener("load", () => {
		const header = document.getElementById("main-header");
		const mobileMenuButton = document.getElementById("mobile-menu-button");
		const mobileMenuClose = document.getElementById("mobile-menu-close");
		const mobileMenu = document.getElementById("mobile-menu");
		const menuIcon = document.getElementById("menu-icon");
		const closeIcon = document.getElementById("close-icon");

		if (
			!header ||
			!mobileMenuButton ||
			!mobileMenu ||
			!menuIcon ||
			!closeIcon ||
			!mobileMenuClose
		)
			return;

		let isMenuOpen = false;

		const toggleMenu = (open) => {
			isMenuOpen = open;
			if (open) {
				mobileMenu.style.height = "100vh";
				menuIcon.style.opacity = "0";
				closeIcon.style.opacity = "1";
				document.body.style.overflow = "hidden";
			} else {
				mobileMenu.style.height = "0";
				menuIcon.style.opacity = "1";
				closeIcon.style.opacity = "0";
				document.body.style.overflow = "";
			}
		};

		mobileMenuButton.addEventListener("click", () => toggleMenu(!isMenuOpen));
		mobileMenuClose.addEventListener("click", () => toggleMenu(false));

		const mobileLinks = mobileMenu.getElementsByTagName("a");
		Array.from(mobileLinks).forEach((link) => {
			link.addEventListener("click", () => toggleMenu(false));
		});

		window.addEventListener("scroll", () => {
			const currentScrollY = window.scrollY;

			if (currentScrollY > lastScrollY && currentScrollY > 100) {
				// Ocultar header al hacer scroll hacia abajo
				header.classList.add("-translate-y-full");
				if (isMenuOpen) {
					toggleMenu(false);
				}
			} else {
				// Mostrar header al hacer scroll hacia arriba
				header.classList.remove("-translate-y-full");
			}

			lastScrollY = currentScrollY;
		});
	});
</script>
